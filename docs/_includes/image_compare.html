
<style>
  .caption {
    text-align: center; 
    padding-bottom: 3em;
    font-style: italic;
  }

  .image-comparison {
    /* max-width: 700px; */
    /* width: 40%; */
    margin-left: auto;
    margin-right: auto;
    padding-top: 3em;
    padding-bottom: 1em;
    overflow: hidden;
  }

  .image-comparison img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: left;
  }

  .image-comparison .images-container {
    position: relative;
    display: flex;
  }

  .image-comparison .images-container .before-image {
    position: absolute;
    top: 0;
    width: 50%;
  }

  .image-comparison .slider {
    position: absolute;
    width: 100%;
    height: 100%;
    opacity: 0;
  }

  .image-comparison .slider-line {
    position: absolute;
    height: 100%;
    width: 0px;
    background-color: rgb(0, 0, 0);
    left: 50%;
    transform: translateX(-50%);
  }

  .image-comparison .slider-icon {
    position: absolute;
    left: 50%;
    top: 50%;
    width: 110px;
    height: 110px;
    color: rgb(231, 231, 231);
    transform: translate(-50%, -50%) rotateZ(90deg);

  }

</style>

<div class="image-comparison" style="max-width: {{ include.width }}px;">
  <div class="images-container">
    <img class="before-image" src="{{ include.file1 | relative_url }}" id="{{include.id}}-before">
    <img class="after-image" src="{{ include.file2 | relative_url }}">

    <div class="slider-line" id="{{ include.id }}-line"></div>

    <div class="slider-icon" id="{{include.id}}-icon">
      <svg 
        xmlns="http://www.w3.org/2000/svg" 
        fill="none" 
        viewBox="0 0 24 24" 
        stroke-width="1.5" 
        stroke="currentColor" 
        class="w-6 h-6">
          <path 
          stroke-linecap="round" 
          stroke-linejoin="round" 
          d="M8.25 15 12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9" />
      </svg>
    </div>

    <input type="range" class="slider" min="0" max="100" id="{{ include.id }}-slider"/>
    
  </div>
</div>
<div class="caption"> 
    <span class="italic">{{ include.description }}</span>
</div>


<script>
  {
  const slider = document.getElementById("{{ include.id }}-slider")
  const beforeImage = document.getElementById("{{ include.id }}-before")
  const sliderLine = document.getElementById("{{ include.id }}-line")
  const sliderIcon = document.getElementById("{{ include.id }}-icon")

  // const slider = document.querySelector(".image-comparison .slider");
  // const beforeImage = document.querySelector(".image-comparison .before-image");
  // const sliderLine = document.querySelector(".image-comparison .slider-line");
  // const sliderIcon = document.querySelector(".image-comparison .slider-icon");


  slider.addEventListener("input", (e) => {

    console.log(e)
    let sliderValue = e.target.value + "%";

    beforeImage.style.width = sliderValue;
    sliderLine.style.left = sliderValue;
    sliderIcon.style.left = sliderValue;
  });
}
</script>